<!DOCTYPE html>
<html lang="id"> <!-- Lang diubah menjadi 'id' -->
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--FavIcon-->
    <link
      rel="shortcut icon"
      href="./assets/2.png"
      type="image/x-icon"
    />
    <!--FavIcon-->

    <title>Pembayaran Pesanan - RNR Digital Printing</title> <!-- Judul Halaman -->

    <!--CSS-->
    <link rel="stylesheet" href="./css/style.css" />
    <!--CSS-->

    <!-- Font -->
     <link rel="stylesheet" href="">
    <!-- Font -->

    <!--Bootstraps CSS-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7"
      crossorigin="anonymous"
    />
    <!--Bootstraps CSS-->

    <style>
        
        .payment-page-section {
            padding-top: 40px;
            padding-bottom: 40px;
        }

        .payment-summary,
        .customer-details-summary,
        .payment-methods {
             background-color: #e9ecef; 
             border: 1px solid #ced4da;
             border-radius: 5px;
             padding: 20px;
             margin-bottom: 20px; 
        }
         .payment-summary h4,
         .customer-details-summary h4,
         .payment-methods h4 {
             margin-top: 0;
             margin-bottom: 15px;
             text-align: center;
         }

        .price-breakdown {
             list-style: none;
             padding: 0;
             margin: 0;
         }
         .price-breakdown li {
             display: flex;
             justify-content: space-between;
             margin-bottom: 5px;
             padding-bottom: 5px;
             border-bottom: 1px dotted #a7c2a7; 
         }
         .price-breakdown li:last-child {
             border-bottom: none;
             margin-top: 10px;
             padding-top: 10px;
             font-size: 1.2em; 
             font-weight: bold;
             border-top: 1px solid #a7c2a7; 
         }
          .price-breakdown li span:first-child {
              font-weight: normal; 
          }
          .price-breakdown li:last-child span {
               font-weight: bold; 
          }

         .customer-details-summary p {
             margin-bottom: 10px;
         }

         .payment-methods .form-check {
             margin-bottom: 15px;
         }

         
         #noOrderDataMessage {
             text-align: center;
             color: #dc3545; 
             font-weight: bold;
             margin-top: 30px;
             padding: 20px;
             border: 1px solid #dc3545;
             background-color: #f8d7da; 
             border-radius: 5px;
         }
    </style>

  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg bg-primary py-3">
      <div class="container">
        <a class="navbar-brand" href="index.html"> 
          <img
            src="./assets/2.png"
            alt="Logo"
            width="30"
            height="24"
            class="d-inline-block align-text-top"
          />
          <span class="fs-3 fw-bold text-white">RNR Digital Printing</span>
        </a>
         <button
          class="navbar-toggler bg-white shadow-none"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
           <ul class="navbar-nav ms-auto d-flex gap-2 text-center pt-lg-0 pt-4">
            <li class="nav-item">
              <a class="nav-link fw-bold text-white" href="index.html#home">Home</a> 
            </li>
            <li class="nav-item">
              <a class="nav-link fw-bold text-white" href="index.html#about">About</a> 
            </li>
            <li class="nav-item">
              <a class="nav-link fw-bold text-white" href="index.html#order-guide">How To Order</a> 
            </li>
            <li class="nav-item">
              <a class="nav-link fw-bold text-white" href="index.html#services">Services</a> 
            </li>
            <li class="nav-item">
              <a class="nav-link fw-bold text-white" href="index.html#faq">FAQ</a> 
            </li>
          </ul>
        </div>
      </div>
    </nav>
    

    <section class="payment-page-section">
        <div class="container">

            <h1 class="text-primary text-center mb-5">Ringkasan & Pembayaran Pesanan</h1>

            
            <div id="noOrderDataMessage" style="display: none;">
                Tidak ada data pesanan ditemukan. Silakan kembali ke halaman layanan untuk memulai pesanan baru.
                <div class="mt-3">
                     <a href="index.html#services" class="btn btn-secondary btn-lg">Kembali ke Layanan</a>
                </div>
            </div>


            
            <div id="orderDetailsAndPayment" style="display: none;">
                <div class="row g-4">

                    
                    <div class="col-md-6">
                        <div class="payment-summary">
                           <h4>Ringkasan Pesanan Anda</h4>
                            <ul class="price-breakdown">
                    
                                <li>
                                    <span>Produk:</span>
                                    <span id="summaryProductName">-</span>
                                </li>
                                <li>
                                    <span>Jumlah:</span>
                                    <span id="summaryQuantity">-</span>
                                </li>
                           
                                <li class="mt-3 pt-3 border-top border-secondary"> 
                                    <span>Subtotal Item:</span>
                                    <span id="summaryItemSubtotal">Rp 0</span>
                                </li>
                                <li id="summaryPromoDiscountRow"  style="display: none;">
                                    <span>Diskon Promo (<span id="summaryPromoName">-</span>):</span>
                                    <span id="summaryPromoDiscount" class="text-danger">Rp 0</span>
                                </li>
                                <li>
                                    <span>Estimasi Sampai:</span>
                                    <span id="summaryEstimatedTime">Pilih opsi pengiriman</span>
                                </li>
                                <li>
                                    <span>Pengiriman (<span id="summaryShippingMethod">-</span>):</span>
                                    <span id="summaryShippingCost">Rp 0</span>
                                </li>
                                 <li>
                                    <span>Pajak:</span> 
                                    <span id="summaryTaxAmount">Rp 0</span>
                                </li>
                                <li class="cart-total"> 
                                    <span>Total Estimasi:</span>
                                    <span id="summaryFinalTotal" class="text-success">Rp 0</span>
                                </li>
                            </ul>
                             <small class="text-muted d-block mt-2">*Harga estimasi, konfirmasi final akan diberikan setelah tim kami memverifikasi pesanan dan file desain.</small>
                        </div>

                         <div class="customer-details-summary mt-4">
                             <h4>Info Kontak & Pengiriman</h4>
                             <p><strong>Nama:</strong> <span id="displayCustomerName">-</span></p>
                             <p><strong>Telepon/WhatsApp:</strong> <span id="displayCustomerPhone">-</span></p>
                             <p><strong>Email:</strong> <span id="displayCustomerEmail">-</span></p>
                             <p><strong>Alamat Pengiriman:</strong> <span id="displayCustomerAddress">-</span></p>
                             <p><strong>Opsi Pengiriman:</strong> <span id="displayShippingMethod">-</span></p>
                             <p><strong>Catatan Tambahan:</strong> <span id="displayNotes">-</span></p>
                         </div>
                    </div>

                   
                    <div class="col-md-6">
                        <div class="payment-methods">
                            <h4>Pilih Metode Pembayaran</h4>
                            <p class="text-muted mb-3">Pilih metode yang paling nyaman bagi Anda.</p>

                            <div class="form-check">
                              <input class="form-check-input" type="radio" name="paymentMethod" id="methodBankTransfer" value="Bank Transfer" checked>
                              <label class="form-check-label fw-bold" for="methodBankTransfer">
                                Transfer Bank (BCA/Mandiri)
                              </label>
                               <p class="form-text text-muted mb-0">BCA: 301231003.</p>
                            </div>

                            <div class="form-check">
                              <input class="form-check-input" type="radio" name="paymentMethod" id="methodEwallet" value="E-wallet">
                              <label class="form-check-label fw-bold" for="methodEwallet">
                                E-wallet (OVO/Gopay/Dana)
                              </label>
                                <p class="form-text text-muted mb-0">Nomor E-wallet: 0812345678921.</p>
                            </div>

                            <div class="form-check">
                              <input class="form-check-input" type="radio" name="paymentMethod" id="methodCash" value="Tunai (Saat Ambil di Toko)"> <!-- Diubah ke Bahasa Indonesia -->
                              <label class="form-check-label fw-bold" for="methodCash">
                                Tunai (Saat Ambil di Toko)
                              </label>
                                <p class="form-text text-muted mb-0">Khusus untuk opsi pengambilan di toko.</p>
                            </div>

                      

                            <div class="d-grid gap-2 mt-4">
                                <button type="button" class="btn btn-primary btn-lg" id="confirmPaymentButton">Konfirmasi Pesanan & Pilih Pembayaran</button>
                                <a href="index.html#services" class="btn btn-secondary btn-lg">Batalkan & Kembali ke Layanan</a> <!-- Link untuk kembali -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div> 
    </section>



        <section class="footer bg-primary mt-5">
          <div class="container">
            <div class="footer-box">
              <div class="row justify-content-between row-gap-4">
                <div class="col col-md-4 col-12 text-white">
                  <div class="d-flex align-items-center gap-2">
                    <img
                    src="./assets/2.png"
                    alt="Logo"
                    width="30"
                    height="30"
                    class="d-inline-block align-text-top"
                  />
                  <span class="fs-4 fw-bold">RNR Digital Printing</span>
                  </div>
                  <p class="lh-lg m-0">Butuh cetak cepat dan hasil keren? Serahkan pada RNR Digital Printing - partner cetak andalan kamu!</p>
                </div>
                <div class="col col-md-2 col-12 d-flex flex-column text-white gap-2">
                  <h4 class="fw-bold">Menu</h4>
                  <a href="index.html#home" class="nav-bot text-white text-decoration-none">Home</a>
                  <a href="index.html#about" class="nav-bot text-white text-decoration-none">About</a>
                  <a href="index.html#order-guide">How To Order</a> <!-- Link ke section di index -->
                  <a href="index.html#services" class="nav-bot text-white text-decoration-none">Services</a>
                  <a href="index.html#faq" class="nav-bot text-white text-decoration-none">FAQ</a>
                </div>
                <div class="col col-md-4 col-12 d-flex flex-column text-white gap-2 lh-lg">
                  <h4 class="fw-bold">Contact Us</h4>
                  <address>
                    <p class="m-0 d-flex align-items-center gap-2">Email: <a href="mailto:digitalprinting@rnr.tugas1.id" class="text-white">digitalprinting@rnr.tugas1.id</a></p>
                    <p class="m-0 d-flex align-items-center gap-2">Phone: <a href="tel:+6285156963404" class="text-white">0851-5696-3404</a></p>
                    <p class="m-0 d-flex align-items-center gap-2">Address: Kompleks PT. Semen Indonesia (Persero) Tbk, Jl. Veteran, Kb. Dalem, Sidomoro, Kebomas, Gresik Regency, East Java 61122</p>
                  </address>
                </div>
              </div>
            </div>

            <div class="copyright text-white text-center mt-5">
              <p>© Copyright by <span class="fw-bold">RNR Enterprise</span> 2025, All Rights Reserved.</p>
              <p>Made With <span>❤</span></p>
            </div>

          </div>
        </section>
       <!-- Footer -->


    <!--Bootstraps JS-->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
      crossorigin="anonymous"
    ></script>
    <!--Bootstraps JS-->


    <script>
        document.addEventListener('DOMContentLoaded', function() {

             function formatRupiah(number) {
                const num = parseFloat(number) || 0;
                return new Intl.NumberFormat('id-ID', {
                    style: 'currency',
                    currency: 'IDR',
                    minimumFractionDigits: 0
                }).format(num);
             }

        
            const storedOrderData = localStorage.getItem('currentOrderData');
            const noOrderMessage = document.getElementById('noOrderDataMessage');
            const orderDetailsSection = document.getElementById('orderDetailsAndPayment');

            if (!storedOrderData) {
              
                noOrderMessage.style.display = 'block';
                orderDetailsSection.style.display = 'none';
            } else {
                
                noOrderMessage.style.display = 'none';
                orderDetailsSection.style.display = 'block';

                const orderData = JSON.parse(storedOrderData);

                document.getElementById('summaryProductName').textContent = orderData.productName || '-';
                document.getElementById('summaryQuantity').textContent = orderData.quantity || '-';

              
                const specificOptionsContainer = document.querySelector('.payment-summary ul'); 
               
                specificOptionsContainer.querySelectorAll('.dynamic-option-item').forEach(el => el.remove()); 

                
                if (orderData.specificOptions) {
                     for (const [key, value] of Object.entries(orderData.specificOptions)) {
                         
                         if (value && value !== '-- Pilih Salah Satu --' && value !== '-- Pilih Ukuran atau Masukkan di Catatan --' && value !== '-- Pilih Finishing (jika ada) --' && value !== '-- Pilih Jenis Bahan --' && value !== '-- Pilih Finishing --' && value !== '-- Pilih Jenis Produk --' && value !== '-- Pilih Bahan Stiker (Jika Label) --' && value !== '-- Pilih Jenis Potong (Jika Label) --' && value !== '-- Pilih Sisi Cetak --' && value !== '') {

                             const listItem = document.createElement('li');
                             listItem.classList.add('dynamic-option-item');

                             
                             const cleanKey = key.replace(/([A-Z])/g, ' $1').trim(); 
                             const formattedKey = cleanKey.charAt(0).toUpperCase() + cleanKey.slice(1); 

                             listItem.innerHTML = `<span>${formattedKey}:</span><span>${value}</span>`;

                             
                             const subtotalItem = document.getElementById('summaryItemSubtotal').parentElement;
                             specificOptionsContainer.insertBefore(listItem, subtotalItem);
                         }
                     }
                }
                
            const promoRowElement = document.getElementById('summaryPromoDiscountRow');
                const promoNameElement = document.getElementById('summaryPromoName');
                const promoDiscountElement = document.getElementById('summaryPromoDiscount');

                if (orderData.promoApplied && orderData.promoApplied !== "Tidak ada" && parseFloat(orderData.promoDiscountAmount) > 0) {
                    promoNameElement.textContent = orderData.promoApplied.split(' (')[0]; 
                    promoDiscountElement.textContent = formatRupiah(-orderData.promoDiscountAmount); 
                    promoRowElement.style.display = 'flex'; 
                } else {
                    promoRowElement.style.display = 'none'; 
                }

                document.getElementById('summaryItemSubtotal').textContent = formatRupiah(orderData.itemSubtotal);
                document.getElementById('summaryEstimatedTime').textContent = orderData.estimatedTime || 'N/A';
                document.getElementById('summaryShippingMethod').textContent = orderData.shippingMethodDisplay || '-'; 
                document.getElementById('summaryShippingCost').textContent = formatRupiah(orderData.shippingCost);
                document.getElementById('summaryTaxAmount').textContent = formatRupiah(orderData.taxAmount);
                document.getElementById('summaryFinalTotal').textContent = formatRupiah(orderData.finalTotal);


             
                document.getElementById('displayCustomerName').textContent = orderData.customerName || '-';
                document.getElementById('displayCustomerPhone').textContent = orderData.customerPhone || '-';
                document.getElementById('displayCustomerEmail').textContent = orderData.customerEmail || '-';
                document.getElementById('displayCustomerAddress').textContent = orderData.customerAddress || '-';
                document.getElementById('displayShippingMethod').textContent = orderData.shippingMethodDisplay || '-'; 
                document.getElementById('displayNotes').textContent = orderData.notes || '-';


   
                const confirmPaymentButton = document.getElementById('confirmPaymentButton');
                confirmPaymentButton.addEventListener('click', function() {
                    const selectedPaymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;

                   

                    alert(`Pesanan Anda (${orderData.productName}) telah dikonfirmasi!\nTotal Estimasi: ${formatRupiah(orderData.finalTotal)}\nMetode Pembayaran: ${selectedPaymentMethod}\n\nTim kami akan segera menghubungi Anda melalui WhatsApp (${orderData.customerPhone}) untuk detail pembayaran dan konfirmasi file desain.`);

                    localStorage.removeItem('currentOrderData');


                    window.location.href = 'index.html'; 

                });

            } 
        });
    </script>

  </body>
</html>
